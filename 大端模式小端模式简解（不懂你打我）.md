# 大端模式小端模式简解（不懂你打我，略略~~）

## 先看概念

> **大端模式（**Big-Endian**），是指数据的高字节保存在内存的低地址中，而数据的低字节保存在内存的高地址中**，这样的存储模式有点儿类似于把数据当作字符串顺序处理：地址由小向大增加，而数据从高位往低位放；这和我们的阅读习惯一致。
>
> **小端模式（**Little-Endian**），是指数据的高字节保存在内存的高地址中，而数据的低字节保存在内存的低地址中**，这种存储模式将地址的高低和数据位权有效地结合起来，高地址部分权值高，低地址部分权值低。

先看两者概念中粗体字后面的内容，简答来说就是，**大端模式符合人们的认知，易于阅读和理解**；而**小端模式符合我们的逻辑方式**；

## 再看高低字节

- 高低字节是对于**字节数大于1**的数据来说的，1字节无高低字节之分。

### 什么是高低字节？

- 先以我们熟悉的十进制来举例，如1234，这个四位数的最高位是1，最低位是4，**从左往右权重依次减低**，其他进制也是一样的。
- 0x11 22 33 44,11为高字节，44为低字节。

## 再看大端小端存取

下面以unsigned int value = 0x12345678为例，分别看看在两种字节序下其存储情况，我们可以用unsigned char buf[4]来表示value。

> **Big-Endian: 低地址存放高位，如下：**
>
> 高地址
>
> \---------------
>
> buf[0] (0x78) -- 低位字节
>
> buf[1] (0x56)
>
> buf[2] (0x34)
>
> buf[3] (0x12) -- 高位字节
>
> \---------------
>
> 低地址
>
> **Little-Endian: 低地址存放低位，如下：**
>
> 高地址
>
> \---------------
>
> buf[0] (0x12) -- 高位字节
>
> buf[1] (0x34)
>
> buf[2] (0x56)
>
> buf[3] (0x78) -- 低位字节
>
> \--------------
>
> 低地址

对于0x12345678，从低地址到高地址来看，大端的存储结果为0x12345678，小端的存储结果为0x78563412。

附百度一张图助于理解

![](E:\图片\新建文件夹\b2de9c82d158ccbfba5e4c721ed8bc3eb035419c.png)

这是知道存储模式来进行的存储得到结果。

- 那么已知数据从低地址到高地址的存储结果，根据大端模式和小端模式不同的存储模式读取的数据又是怎么样的呢？

  我们还以这个来举栗

  ![](E:\图片\Camera Roll\屏幕截图 2021-09-24 184606.png)

以11 22 33 44的存储结果来分析

- 大端模式：从低地址开始读取，由于大端模式低地址存储高字节，每次读取一个字节得到的数据为11-->1122-->112233-->11223344,得到的数据就是0x11223344。

- 小端模式：从低地址开始读取，低地址存储低字节，每次读取一个字节得到的数据为，11-->2211-->332211-->44332211，结果为44332211。

那么如何通过一个C程序判断所用机器是那种存储模式呢？

- 利用联合体union的存放顺序是所有成员都从低地址开始存放，且所有成员共享同一块空间，利用该特性就可以轻松地获得了CPU对内存采用Little- endian还是Big-endian模式读写。（大小端主要由cpu决定）

  ```c
  
  int checkCPU(void)
  {
  	union
  	{
  		int a;
  		char b;
  	}c;
  	c.a = 1;
  	return (c.b == 1);
  }
  //大端返回0，小端返回1
  ```

  

来看道华为应届生笔试题，看看是否已掌握这个知识了。

```c
//在X86下，有下列程序
#include<stdio.h>
int main()
{
    union
    {
        short k;
        char i[2];
    }*s, a;
    s = &a;
    s->i[0] = 0x39;
    s->i[1] = 0x38;
    printf(“%x\n”,a.k);
    return 0;
}
// 输出结果是（    ）
// A) 3839          B) 3938         C) 380039          D)不确定
//请把答案打在评论区

```

