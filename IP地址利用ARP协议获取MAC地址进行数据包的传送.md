# IP地址利用ARP协议获取MAC地址进行数据包的传送

## IP地址和MAC地址缺一不可吗？

### ARP

ARP是一种解决地址问题的协议。以目标IP地址为线索，用来定位下一个应该接收数据分包的网络设备对应的MAC地址。如果目标主机不在同一个链路上时，可以通过ARP查找下一跳路由器的MAC地址。不过ARP只适用于 IPv4，不能用于IPv6。IPv6中可以用ICMPv6替代ARP发送邻居探索消息。

### 若只有IP地址

若只有IP地址，数据包可以通过路由控制将其自身发送到目标IP地址所在的数据链路中，再通过广播进行传送。虽然通过路由控制可以得知数据包下一步发送给那个路由器，但由于没有MAC地址，只能通过广播寻找下一步的路由器。

### 若只有MAC地址

若只有MAC地址，数据包无法得知目标MAC地址的所在位置（IP地址可以通过网络标识进行集约），只能通过广播的形式将数据包传播到所有相连的其他网络中去，这样可能将相同的数据包多次发送到同一个网络中 。 而且如果全世界的设备都使用MAC地址相连，那么网桥在习得前就得向全世界发送包，且需要一张巨大的表来维持所学到的MAC地址。

### ARP结合IP地址和MAC地址

首先从路由控制表中得知下一跳路由器的IP地址，再通过ARP协议解析得知其MAC地址，就可以根据交换机中的转发表，就可以得知以该MAC地址作为目标地址的包，决定从哪个接口发送数据，这样就可高效准确的进行数据包的传送。



